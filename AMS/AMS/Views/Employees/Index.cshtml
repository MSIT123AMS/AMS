@model IEnumerable<AMS.Controllers.EmployeesViewModel>

@{
    ViewBag.Title = "Index";
}
@section scripts
{

    <script>
        $(document).ready(function () {
            $('#basic-datatables').DataTable({
            });
        });


        $("#Employees").bind("change", function () {
            UpdateOrders();
           
        });
        $("#Department").bind("change", function () {
            UpdateOrders1();
           
        });


        function UpdateOrders() {
            $.ajax({
                
                type: "GET",
                url: "@Url.RouteUrl("Default1", new { controller = "Employees", action = "Listemp" })/" + Employees.value + "/" + Department.value,
                @*url:@Url.RouteUrl("Default1", new { controller = "Employees", action = "List", id = 1, id2 = 1 })*@
                }).done(function (result) {
                    $("#Employeestable").html(result);
                    $('#basic-datatables').DataTable({
                    });
                }).fail(function (e) { alert(e.responseText) });
        }


        function UpdateOrders1() {
            $.ajax({
                type: "GET",
                @*url: "@Url.Action("Orders", "Customers")/" + Customers.value,*@
                url: "@Url.RouteUrl("Default1", new { controller = "Employees", action = "Listemp" })/" + "null/" + Department.value,
                @*@Html.RouteLink( )*@
                @*url:@Url.RouteUrl("Default1", new { controller = "Employees", action = "List", id = "", id2 =  })*@
                }).done(function (result) {
                    $("#Employeestable").html(result);
                    $('#basic-datatables').DataTable({
                    });
                }).fail(function (e) { alert(e.responseText) });
        }


    </script>

}
<h2>Index</h2>




<div class="page-inner">


    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header row form-group">
                    <label class="col-sm-1 control-label">部門:</label>
                    @Html.DropDownList("Department", null, "-請選擇-", new { @class = "col-sm-2 form-control" })
                    <label class="col-sm-1 control-label">員工:</label>
                    @Html.DropDownList("Employees", null, "-請選擇-", new { @class = "col-sm-2 form-control" })

                    @Html.ActionLink("新增員工", "Create", null, new { @class = "col-sm-1 btn btn-outline-primary" })

                </div>
                <div class="card-body">
                    <div class="table-responsive" id="Employeestable">

                       @Html.Partial("_ListempPartial", Model);


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>